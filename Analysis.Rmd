---
title: "Predicting Housing Sale Prices in Ames, Iowa"
output:
  html_document:
    df_print: paged
---

Project Description
With 79 explanatory variables describing (almost) every aspect of residential homes in Ames, Iowa, our goal is to predict the final price of each home of the test data set using the training data set.

Datasets
80 Columns x 1460 Rows of housing sales data from years 2006 to 2010

Source: https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data

Load and print structure of pricing data
```{r}
data <- read.csv(file = 'data.csv',
                 header = TRUE, 
                 sep = ",",
                 stringsAsFactors = FALSE)
str(data)
```

```{r}
colnames(data)
```

Encoding of non-numberic fields
```{r}
data1 <- data
data1[is.na(data1)] <- 0

for (f in colnames(data1)) {
  if (class(data1[[f]]) == 'character') {
      lev <- sort(unique(c(data1[[f]])))
      data1[[f]] <- as.integer(factor(data1[[f]], levels = lev))
  }
}
str(data1)
```
One-way plots
```{r}
nplots <- seq(from=1, to=9, by=1)

par(mfrow=c(3,3))

for (i in nplots) {
  plot(data1[,i], data1[,81], xlab=colnames(data)[i], ylab=colnames(data)[81])
}
```
Ordinary least squares - Single variable
```{r}
i=6
f <- colnames(data1)[i]
frm <- as.formula(paste("SalePrice ~ 0 + ", f))
fit <- glm(formula = frm, data=data1, family = gaussian())
print(f)
summary(fit)
```

Ordinary least squares - Single variable
```{r}
nums <- seq(from=1, to=80, by=1)
fields <- character()
dev <- double()

for (i in nums) {
  f <- colnames(data1)[i]
  fields[i] <- f
  frm <- as.formula(paste("SalePrice ~ 0 + ", f))
  fit <- glm(formula = frm, data=data1, family = gaussian())
  dev[i] <- summary(fit)$deviance
}

devs <- data.frame(fields= fields, dev = dev)
devs <- devs[order(devs$dev),]
devs[1:15,]
```

Select data columns
```{r}
df <- subset(data, select=c(
        "OverallQual", "GrLivArea", "GarageCars",
        "ExterQual", "GarageArea", "TotalBsmtSF",
        "KitchenQual", "FullBath", "TotRmsAbvGrd",
        "YearBuilt", "YearRemodAdd", "SalePrice"))

for (f in colnames(df)) {
  if (class(df[[f]]) == 'character') {
      lev <- sort(unique(c(df[[f]])))
      df[[f]] <- as.integer(factor(df[[f]], levels = lev))
  }
}
str(df)
```



Summarize df
```{r}
summary(df)
pairs(df)
```
